"use strict";(self.webpackChunkchatapp_frontend=self.webpackChunkchatapp_frontend||[]).push([[722],{3843:function(e,n,s){s.d(n,{$A:function(){return t},lo:function(){return c},uE:function(){return a}});var a=function(e){return"".concat("http://13.112.13.61",":").concat("5000","/all-friends/of-user/").concat(e)},t=function(e,n){return"".concat("http://13.112.13.61",":").concat("5000","/private-room/key/").concat(e,"/").concat(n)},c=function(e,n){return"".concat("http://13.112.13.61",":").concat("5000","/messages/").concat(e,"/").concat(n)}},6722:function(e,n,s){s.r(n),s.d(n,{default:function(){return w}});var a=s(2982),t=s(4165),c=s(5861),o=s(885),r=s(803),i=s(9580),u=s(5310),l=s(2791),m=s(1686),g=s(6651),d=s(9434),f=s(4217),v=s(8955),p=s(9276),h=s(5764),A=s(2388),j=s(3843),x=function(){var e=(0,l.useState)([]),n=(0,o.Z)(e,2),s=n[0],a=n[1],r=(0,l.useCallback)(function(){var e=(0,c.Z)((0,t.Z)().mark((function e(n,s){var c,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Z.get((0,j.lo)(n,s));case 2:return c=e.sent,o=c.data,a(o.data),e.abrupt("return",o.data);case 6:case"end":return e.stop()}}),e)})));return function(n,s){return e.apply(this,arguments)}}(),[s]);return[r]},Z=s(604),C=s(4880),I=s(1523),k=s(5436),N=s(5801),E=s(4565),B=s(184);function R(e){var n=(0,d.v9)((function(e){return e.changeTheMessageComponentHeaderReducer}));return(0,B.jsxs)("div",{className:"friend-data-container",children:[(0,B.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAACsUlEQVRIie2Wy2sUQRCHv5quSdYHio8gRA8awVfw5OMSgwdF0aBeRcG7Eg0IHkSUiKB48hX1LBjxHzAKKsJCDqIXEREJmSXqRTGyIfGxbs+0h90Jm9kZDGFzMr9bV1f/vurq3t6BOc0JKEAuUO0cgpasnCFoCVQ7C5CbjqeXNfEJlga+fzJQzTvVIpD3VM9VIc0fofUjtA5BM0B1Lu9Ui4FqPvD97hFYkuUvacFh1asCp6ivPgR+AQsT8QlgHmAS8d8C19dYe/af4ILqTgcvsoqaiRzsXmvt89qYl0gwDu42ElqF3HCJbkwBB8YcBjY2EgrgoL1gzJFMsCdSdxYNk8iZVPCw6g4H7bMGhs2BamcdWJw7NotQAJxzk+32AByIE9mfuUKkX0R6gEeZpvBYRHoQuV8ZptnIIVe9uAIw0tS0KYyidxmel9qsvRAPAt+/R6I7IvJgTbl8NB4XVC84uJjqZsyGtlLpgwcQhuGWrJ2E1t5K7OxWStqUmFrbl+WHtdshbrVI1qVyC+BHbcATmagrLhGz8JPKK1cvkXWTYBFZmQGWkjEHpkSi6GAyyUvEImO6qH8+Y/BqAAXAueUZYJzInWFjTKT60ouivc653pS084Hvj4eeN6DWbnMiacdRNXSLoXq5AtVnwK7M5MbqaZu1e+Lfcfp5zIIEyhA/ICJjGXlfgdcz8H8FfEubcCLjk2CBy8DblLxIRPoj6BDoBQaBtCLHgEGB3gg6HDwkvYtvgCtVZkXvoCmnelrgLLAoseBmm7U98eAzLAtzucV/nJN5pVJxFYzGc4ExtxE5kVhfFLgyau21rdVW1/3vDkGLp9otcJzKN9Zo2doN6zNal1QAK1B9T+Wz54vAXd/avtriUsG1HZhvzL4IymvDcGA60FjDxnQJeN/D8Em8wzn9f/oLxgDYCjb4HCgAAAAASUVORK5CYII=",className:"friend-pic",alt:"friend-pic"}),(0,B.jsx)(E.Z,{className:"friend-message-name",children:n.messageHeading.charAt(0).toUpperCase()+n.messageHeading.slice(1)})]})}var S=(0,l.memo)(R),b=(0,g.ZP)("".concat("http://13.112.13.61",":").concat("5000"));var w=function(){var e=JSON.parse(localStorage.getItem("isReloaded")),n=[{command:["Go to *","Open for *","I want a *"],callback:function(e){return j(e)}}],s=(0,l.useState)(""),g=(0,o.Z)(s,2),A=g[0],j=g[1],E=(0,C.k6)(),R=((0,N.x6)({commands:n}).transcript,x()),w=(0,o.Z)(R,1)[0],y=(0,l.useRef)(),H=((0,d.v9)((function(e){return e.changeTheMessageComponentHeaderReducer})),(0,d.v9)((function(e){return e.changeThePrivateRoomKey}))),J=(0,d.v9)((function(e){return e.senderAndReceiverReducer})),V=(0,l.useState)(""),L=(0,o.Z)(V,2),U=L[0],z=L[1],F=(0,l.useState)(!1),q=(0,o.Z)(F,2),G=q[0],K=q[1],Y=(0,l.useState)([]),D=(0,o.Z)(Y,2),T=D[0],Q=D[1],X=(0,l.useState)(null),M=(0,o.Z)(X,2),P=M[0],W=M[1],O=(0,l.useState)(!1),_=(0,o.Z)(O,2),$=_[0],ee=_[1];if(A){var ne=A.slice(0,-1);ne=ne.replace(/\s/g,""),["home","videocall"].includes(ne)?E.push("".concat({home:"/",videocall:"/video"}[ne])):console.log("Page Not Found")}var se=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0==H.roomId){e.next=6;break}return b.emit("join-room",H.roomId),e.next=4,w(J.sender,J.receiver);case 4:n=e.sent,Q(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){U.includes("http")?(Q([].concat((0,a.Z)(T),[{email:J.sender,messages:U}])),b.emit("send-message",{message:U,room:H.roomId})):(Q([].concat((0,a.Z)(T),[{email:J.sender,messages:U}])),b.emit("send-message",{message:U,room:H.roomId,messageSender:J.sender,messageReceiver:J.receiver}))};return(0,l.useEffect)((function(){se(),b.off("receive-message").on("receive-message",(function(e){e.message.includes("http"),W({email:J.receiver,messages:e.message})}),[b])}),[H]),(0,l.useEffect)((function(){var e;null===(e=y.current)||void 0===e||e.scrollIntoView({behaviour:"smooth"}),document.getElementById("message-area").scrollTop=document.getElementById("message-area").scrollHeight}),[T]),(0,l.useEffect)((function(){P&&Q([].concat((0,a.Z)(T),[P]))}),[P]),(0,l.useEffect)((function(){!1===e&&(window.location.reload(),console.log("YES"),localStorage.setItem("isReloaded",JSON.stringify(!0)))})),(0,B.jsx)("div",{className:"message-component-module",children:(0,B.jsxs)(r.Z,{className:"message-component-container",children:[(0,B.jsx)(S,{}),(0,B.jsx)(r.Z,{className:"messages-data",id:"message-area",children:T&&T.map((function(e,n){return e.email===J.sender?e.messages.includes("jpeg")?(0,B.jsx)("img",{src:e.messages,className:"outgoing-images"},n):(0,B.jsx)("div",{className:"outgoing-messsages",children:e.messages},n):e.messages.includes("jpeg")?(0,B.jsx)("img",{src:e.messages,className:"incoming-images"},n):(0,B.jsx)("div",{className:"incoming-messsages",children:e.messages},n)}))}),(0,B.jsxs)(r.Z,{className:"message-send",children:[(0,B.jsx)(i.Z,{className:"type-messages",value:U,placeholder:"Type Something",onChange:function(e){z(e.target.value)},disableUnderline:!0,autoFocus:!0,onKeyUp:function(e){"Enter"===e.key&&ae()}}),(0,B.jsx)("label",{htmlFor:"image-upload",children:(0,B.jsx)(h.Z,{id:"image-upload-icon"})}),(0,B.jsx)("input",{type:"file",id:"image-upload",onChange:function(e){var n=e.target.files[0],s=new FileReader;s.readAsDataURL(n),s.onload=function(){console.log(s.result)}},accept:"image/png, image/jpeg,.txt,.doc"}),(0,B.jsx)(f.Z,{className:"insert-emoji",onClick:function(){K((function(e){return!e})),ee(!0)}}),(0,B.jsx)(u.Z,{open:$,children:(0,B.jsx)("div",{className:"modal-box",onClick:function(){K(!1),ee(!1)},children:(0,B.jsx)(p.Z,{children:G&&(0,B.jsx)(v.ZP,{emojiStyle:"google",onEmojiClick:function(e,n){console.log(e),z((function(n){return n+e.emoji})),K(!1),ee(!1)}})})})}),(0,B.jsx)(I.rU,{to:"/video",children:(0,B.jsx)(Z.Z,{className:"video-icon"})}),(0,B.jsx)(k.Z,{onClick:N.ZP.startListening,className:"voice-recog-icon"}),(0,B.jsx)(m.Z,{className:"send-btn",onClick:ae})]})]})})}}}]);
//# sourceMappingURL=722.245292c0.chunk.js.map